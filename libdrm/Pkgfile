# Description: Userspace interface to kernel DRM services
# URL: http://dri.freedesktop.org/
# Maintainer: CRUX Xorg Team, xorg-ports at crux dot nu
# Arch Maintainer: CRUX-ARM System Team, devel at crux-arm dot nu
# Depends on: libpthread-stubs xorg-libpciaccess 

name=libdrm
version=2.4.114
release=1
source=(http://dri.freedesktop.org/libdrm/libdrm-$version.tar.xz)

build() {
	cd $name-$version

meson build \
  --prefix=/usr \
  -Dman-pages=disabled \
  -Dvalgrind=disabled \
  -Dcairo-tests=disabled \
  -Db_lto=true \
  -Db_pie=true \
  -Dintel=disabled \
  -Dradeon=disabled \
  -Dnouveau=disabled \
  -Dvmwgfx=disabled \
  -Damdgpu=disabled \
  -Domap=enabled \
  -Dexynos=enabled \
  -Dtegra=enabled

  DESTDIR=$PKG ninja -C build -j ${JOBS:-1} install
}
